!function i(t,e,s){function n(a,r){if(!e[a]){if(!t[a]){var h="function"==typeof require&&require;if(!r&&h)return h(a,!0);if(o)return o(a,!0);var u=new Error("Cannot find module '"+a+"'");throw u.code="MODULE_NOT_FOUND",u}var m=e[a]={exports:{}};t[a][0].call(m.exports,function(i){var e=t[a][1][i];return n(e?e:i)},m,m.exports,i,t,e,s)}return e[a].exports}for(var o="function"==typeof require&&require,a=0;a<s.length;a++)n(s[a]);return n}({"/Users/philipavargas/Desktop/js_game_of_afterlife/public/js/game/board.js":[function(i,t,e){"use strict";var s=void 0,n=void 0,o=void 0;n=i("pathfinder"),o=i("settings"),s=function(i){this.humanoid,this.score=0,this.dx=0,this.dy=0,this.humanoids=i.humanoids||[],this.width=i.width||"600px",this.height=i.height||"400px"},s.prototype={isGameActive:function(){for(var i=!1,t=0;t<this.humanoids.length;t++)("human"===this.humanoids[t].humanType||"player"===this.humanoids[t].humanType)&&(i=!0);return i},isPlayerAlive:function(){for(var i=!1,t=0;t<this.humanoids.length;t++)"player"===this.humanoids[t].humanType&&(i=!0);return i},isPositionEqual:function(i,t){return i.x===t.x&&i.y===t.y},isValidDestination:function(i){for(var t=!0,e=0;e<this.humanoids.length;e++)this.isPositionEqual(this.humanoids[e].position,i)&&(t=!1);return t},nearestHumanoid:function(i){var t=this.findSimilarHumanoids(i),e=this.findClosestPos(t),s=this.findClosestHumanoid(e,t);return s},isAnyHumanRemaining:function(){for(var i=!1,t=0;t<this.humanoids.length;t++)if("human"==this.humanoids[t].humanType||"player"==this.humanoids[t].humanType){i=!0;break}return i},nextTurn:function(){for(var i=0;i<this.humanoids.length;i++)if(this.humanoid=this.humanoids[i],"infectedHuman"!=this.humanoid.humanType)if("player"!=this.humanoid.humanType){var t=this.nearestHumanoid("zombie"),e=this.nearestHumanoid("human"),s=this.nearestHumanoid("player"),o=this.setDestination(e,t,s);o.x=(o.x+this.width)%this.width,o.y=(o.y+this.height)%this.height,this.humanoid.isAbleToBite(s)&&this.humanoid.bite(s),this.humanoid.isAbleToBite(e)&&this.humanoid.bite(e),this.isValidDestination(o)&&(this.humanoid.position=o)}else{var a={x:this.humanoid.position.x+this.dx*this.humanoid.speed,y:this.humanoid.position.y+this.dy*this.humanoid.speed},r=n.moveTowards(this.humanoid.position,a,this.humanoid.speed);r.x=(r.x+this.width)%this.width,r.y=(r.y+this.height)%this.height,this.humanoid.position=r}else this.humanoid.incrementTimeSinceInfection();this.incrementStore(s)},incrementStore:function(i){i&&"player"===i.humanType&&(this.score+=10)},setDestination:function(i,t,e){return"zombie"==this.humanoid.humanType?this.setZombieDestination(i,t,e):"human"==this.humanoid.humanType?this.setHumanDestination(i,t,e):this.humanoid.position},setZombieDestination:function(i,t,e){var s=Number.POSITIVE_INFINITY,a=Number.POSITIVE_INFINITY,r=n.distanceTo(t.position,this.humanoid.position)*o.zombieSpread;return e&&(s=n.distanceTo(e.position,this.humanoid.position)),i&&(a=n.distanceTo(i.position,this.humanoid.position)),this.humanoid.moveNearest(a>s?r>s?e:t:r>a?i:t)},setHumanDestination:function(i,t,e){var s=Number.POSITIVE_INFINITY,a=Number.POSITIVE_INFINITY,r=n.distanceTo(t.position,this.humanoid.position);return e&&(s=n.distanceTo(e.position,this.humanoid.position)),i&&(a=n.distanceTo(i.position,this.humanoid.position)),this.humanoid.moveNearest(r<o.humanFearRange||!e&&!i?t:a>s?e:i)},deleteSelfHumanoid:function(){for(var i=[],t=0;t<this.humanoids.length;t++)i.push(this.humanoids[t]);for(var t=0;t<this.humanoids.length;t++)if(this.isPositionEqual(this.humanoids[t].position,this.humanoid.position)){i.splice(t,1);break}return i},findSimilarHumanoids:function(i){for(var t=this.deleteSelfHumanoid(),e=[],s=0;s<t.length;s++)t[s].humanType===i&&e.push(t[s]);return e},findClosestPos:function(i){for(var t=[],e=0;e<i.length;e++){var s=n.distanceTo(i[e].position,this.humanoid.position);t.push(s)}return t},findClosestHumanoid:function(i,t){for(var e=Math.min.apply(null,i),s=0;s<i.length;s++)if(i[s]==e)var n=t[s];return n}},t.exports=s},{pathfinder:"/Users/philipavargas/Desktop/js_game_of_afterlife/public/js/game/pathfinder.js",settings:"/Users/philipavargas/Desktop/js_game_of_afterlife/public/js/game/settings.js"}],"/Users/philipavargas/Desktop/js_game_of_afterlife/public/js/game/game.js":[function(i,t,e){"use strict";function s(){function i(){h.clearRect(0,0,s,r);for(var i=0;i<m.humanoids.length;i++){h.beginPath();var t=m.humanoids[i],e=t.position.x,n=t.position.y;h.arc(e,n,5,0,2*Math.PI),t.color="human"===t.humanType?"#00aaaa":"zombie"===t.humanType?"#ff0000":"player"===t.humanType?"#00cc00":"#770000",h.fillStyle=t.color,h.fill(),h.stroke()}}function t(t){var e,s;s=function(){i(),t.isGameActive()?(document.getElementById("score").innerHTML=t.score,t.nextTurn(),e=t.isPlayerAlive()?a.turnDelay.normal:a.turnDelay.fast,setTimeout(s,e)):alert("EVERYBODY IS DEAD!!!\nYour score was: "+t.score)},setTimeout(s,a.turnDelay.normal)}var e=document.getElementsByTagName("canvas")[0],s=e.width,r=e.height,h=e.getContext("2d"),u=o.populate(a.humanCount,a.zombieCount),m=new n({humanoids:u,width:s,height:r});document.addEventListener("keyup",function(i){(68===i.which||65===i.which)&&(m.dx=0),(83===i.which||87===i.which)&&(m.dy=0)}),document.addEventListener("keydown",function(i){65===i.which?m.dx=-1:68===i.which?m.dx=1:87===i.which?m.dy=-1:83===i.which&&(m.dy=1)}),t(m)}var n=i("board"),o=i("humanoidFactory"),a=i("settings");t.exports=s},{board:"/Users/philipavargas/Desktop/js_game_of_afterlife/public/js/game/board.js",humanoidFactory:"/Users/philipavargas/Desktop/js_game_of_afterlife/public/js/game/humanoidFactory.js",settings:"/Users/philipavargas/Desktop/js_game_of_afterlife/public/js/game/settings.js"}],"/Users/philipavargas/Desktop/js_game_of_afterlife/public/js/game/humanoid.js":[function(i,t,e){"use strict";var s=void 0,n=void 0,o=void 0;n=i("pathfinder"),o=i("settings"),s=function(i){this.position=i.position||{x:5+Math.floor(591*Math.random()),y:5+Math.floor(391*Math.random())},this.speed=i.speed,this.humanType=i.humanType,this.timeSinceInfection=0,this.lastPosition={x:this.position.x,y:this.position.y}},s.prototype={isAttractedTo:function(i){return"human"===i.humanType||"player"===i.humanType},storeLastPosition:function(){this.lastPosition={x:this.position.x,y:this.position.y}},isLastMoveRepeated:function(i){return Math.abs(i.x-this.lastPosition.x)<o.repitionTolerance&&Math.abs(i.y-this.lastPosition.y)<o.repitionTolerance},getBitten:function(){this.humanType="infectedHuman",this.speed=0},bite:function(i){i&&i.getBitten()},turnToZombie:function(){this.humanType="zombie",this.speed=o.zombieSpeed},isAbleToBite:function(i){return i?"zombie"===this.humanType&&n.distanceTo(i.position,this.position)<10:void 0},incrementTimeSinceInfection:function(){this.timeSinceInfection++,5===this.timeSinceInfection&&this.turnToZombie()},moveNearest:function(i){var t;return t=this.isAttractedTo(i)?n.moveTowards(this.position,i.position,this.speed):n.moveAwayFrom(this.position,i.position,this.speed),this.lastPosition.x===this.position.x&&this.lastPosition.y===this.position.y?(this.storeLastPosition(),n.moveRandomly(this.position,this.speed)):this.isLastMoveRepeated(t)?(this.storeLastPosition(),n.movePerpendicularTo(this.position,i.position,this.speed)):(this.storeLastPosition(),t)}},t.exports=s},{pathfinder:"/Users/philipavargas/Desktop/js_game_of_afterlife/public/js/game/pathfinder.js",settings:"/Users/philipavargas/Desktop/js_game_of_afterlife/public/js/game/settings.js"}],"/Users/philipavargas/Desktop/js_game_of_afterlife/public/js/game/humanoidFactory.js":[function(i,t,e){"use strict";var s=void 0,n=void 0;n=i("settings"),s=i("humanoid");var o={populate:function(i,t){return o.creation(i,"human",n.humanSpeed).concat(o.creation(t,"zombie",n.zombieSpeed)).concat(o.creation(1,"player",n.playerSpeed))},creation:function(i,t,e){for(var n=[],o=0;i>o;o++){var a=new s({humanType:t,speed:e});n.push(a)}return n}};t.exports=o},{humanoid:"/Users/philipavargas/Desktop/js_game_of_afterlife/public/js/game/humanoid.js",settings:"/Users/philipavargas/Desktop/js_game_of_afterlife/public/js/game/settings.js"}],"/Users/philipavargas/Desktop/js_game_of_afterlife/public/js/game/initialize.js":[function(i,t,e){"use strict";var s=i("game");s()},{game:"/Users/philipavargas/Desktop/js_game_of_afterlife/public/js/game/game.js"}],"/Users/philipavargas/Desktop/js_game_of_afterlife/public/js/game/pathfinder.js":[function(i,t,e){"use strict";var s={moveTowards:function(i,t,e){var n=t.y-i.y,o=t.x-i.x,a=s.distanceTo(t,i);return 0!==e&&e>a?t:{x:i.x+o/a*e,y:i.y+n/a*e}},movePerpendicularTo:function(i,t,e){var n=t.y-i.y,o=t.x-i.x,a=s.distanceTo(t,i);return 0!==e&&e>a?t:{x:i.x+o/a*e,y:i.y-n/a*e}},moveAwayFrom:function(i,t,e){return s.moveTowards(i,t,-e)},distanceTo:function(i,t){var e=i.y-t.y,s=i.x-t.x;return Math.sqrt(Math.pow(e,2)+Math.pow(s,2))},moveRandomly:function(i,t){var e=void 0;return e=2*Math.random()*Math.PI,{x:i.x+Math.cos(e)*t,y:i.y+Math.sin(e)*t}}};t.exports=s},{}],"/Users/philipavargas/Desktop/js_game_of_afterlife/public/js/game/settings.js":[function(i,t,e){"use strict";var s={humanSpeed:7,playerSpeed:6,zombieSpeed:4,humanCount:30,zombieCount:3,turnDelay:{normal:100,fast:25},repitionTolerance:1,zombieSpread:3,humanFearRange:20};t.exports=s},{}]},{},["/Users/philipavargas/Desktop/js_game_of_afterlife/public/js/game/initialize.js"]);